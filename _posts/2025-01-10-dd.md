---layout: post
title: Microsoft 에서 만든 Multi-Agent framework, AutoGen
date: 2025-01-10 10:00:00
giscus_comments: true
categories: framework
toc:
  beginning: true
tags: LLM agent WIP Microsoft
---

AgentChat 은 에이전트 내부의 이벤트를 나타내는 메시지 개념도 지원

- 도구 호출 요청을 나타내는 `ToolCallRequestEvent`
- 도구 호출 결과를 포함하는 `ToolCallExecutionEvent`

## Agent 응답 받기

`on_messages()` 함수를 이용해서 에이전트의 응답(`response`)을 받을 수 있다.

이때 응답은 `response.inner_messages` 와 `response.chat_message` 를 포함한다.

- `inner_messages` 는 에이전트의 “thought process” 를 저장한다.
- `chat_message` 는 에이전트의 최종 응답을 포함한다.

아래는 agent 의 `on_messages()` 호출 예시이다.

```python
async def assistant_run() -> None:
    response = await agent.on_messages(
        [TextMessage(content="Find information on AutoGen", source="user")],
        cancellation_token=CancellationToken(),
    )
    print(response.inner_messages)
    print(response.chat_message)


# Use asyncio.run(assistant_run()) when running in a script.
await assistant_run()
```

`cancellation_token` 을 이용해서 언제 취소되는지 명시적으로 지정해주는걸 알 수 있다.

