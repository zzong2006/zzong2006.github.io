<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>—layout: post title: Microsoft 에서 만든 Multi-Agent framework, AutoGen date: 2025-01-10 10:00:00 giscus_comments: true categories: framework toc: beginning: true tags: LLM agent WIP Microsoft —</p> <p>AgentChat 은 에이전트 내부의 이벤트를 나타내는 메시지 개념도 지원</p> <ul> <li>도구 호출 요청을 나타내는 <code class="language-plaintext highlighter-rouge">ToolCallRequestEvent</code> </li> <li>도구 호출 결과를 포함하는 <code class="language-plaintext highlighter-rouge">ToolCallExecutionEvent</code> </li> </ul> <h2 id="agent-응답-받기">Agent 응답 받기</h2> <p><code class="language-plaintext highlighter-rouge">on_messages()</code> 함수를 이용해서 에이전트의 응답(<code class="language-plaintext highlighter-rouge">response</code>)을 받을 수 있다.</p> <p>이때 응답은 <code class="language-plaintext highlighter-rouge">response.inner_messages</code> 와 <code class="language-plaintext highlighter-rouge">response.chat_message</code> 를 포함한다.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">inner_messages</code> 는 에이전트의 “thought process” 를 저장한다.</li> <li> <code class="language-plaintext highlighter-rouge">chat_message</code> 는 에이전트의 최종 응답을 포함한다.</li> </ul> <p>아래는 agent 의 <code class="language-plaintext highlighter-rouge">on_messages()</code> 호출 예시이다.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="k">def</span> <span class="nf">assistant_run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">agent</span><span class="p">.</span><span class="nf">on_messages</span><span class="p">(</span>
        <span class="p">[</span><span class="nc">TextMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="sh">"</span><span class="s">Find information on AutoGen</span><span class="sh">"</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="sh">"</span><span class="s">user</span><span class="sh">"</span><span class="p">)],</span>
        <span class="n">cancellation_token</span><span class="o">=</span><span class="nc">CancellationToken</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">inner_messages</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">chat_message</span><span class="p">)</span>


<span class="c1"># Use asyncio.run(assistant_run()) when running in a script.
</span><span class="k">await</span> <span class="nf">assistant_run</span><span class="p">()</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">cancellation_token</code> 을 이용해서 언제 취소되는지 명시적으로 지정해주는걸 알 수 있다.</p> </body></html>